{% extends 'ligas/base_admin.html' %}
{% block title %}Jugadores{% endblock %}
{% block header %}Jugadores{% endblock %}
{% block breadcrumbs %}<a href="/">Inicio</a> / Administración / Jugadores{% endblock %}
{% block actions %}
  <form method="get" class="searchbar" action="">
    <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Buscar por nombre, apellido, DNI o club...">
    <button class="btn" type="submit">Buscar</button>
  </form>
  {% if perms.ligas.add_jugador %}
    <a class="btn primary js-open-modal" data-modal-title="Nuevo jugador" href="{% url 'ligas:jugador_create' %}">Nuevo jugador</a>
  {% endif %}
{% endblock %}
{% block content %}
  <div id="listContainer">
  <table>
    <thead>
      <tr><th>Apellido</th><th>Nombre</th><th>Equipo</th><th>Acciones</th></tr>
    </thead>
    <tbody>
      {% for obj in object_list %}
      <tr>
        <td>{{ obj.apellido }}</td>
        <td>{{ obj.nombre }}</td>
        <td>{{ obj.equipo }}</td>
        <td>
          {% if perms.ligas.change_jugador %}<a class="btn js-open-modal" data-modal-title="Editar jugador" href="{% url 'ligas:jugador_update' obj.pk %}">Editar</a>{% endif %}
          {% if perms.ligas.delete_jugador %}<a class="btn danger js-open-modal" data-modal-title="Eliminar jugador" href="{% url 'ligas:jugador_delete' obj.pk %}">Eliminar</a>{% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No hay jugadores.</td></tr>
      {% endfor %}
    </tbody>
  </table>
  {% if is_paginated %}
  <div class="pagination">
    {% if page_obj.has_previous %}
      <a href="?q={{ request.GET.q }}&page={{ page_obj.previous_page_number }}">« Anterior</a>
    {% endif %}
    <span class="current">Página {{ page_obj.number }} de {{ paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a href="?q={{ request.GET.q }}&page={{ page_obj.next_page_number }}">Siguiente »</a>
    {% endif %}
  </div>
  {% endif %}
  </div>
{% endblock %}
